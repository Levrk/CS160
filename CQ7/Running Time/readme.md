This algorithm takes n^2 time complexity in the worst case because it uses two nested structures one of them being a for loop and the other being a while loop. Both of these repeating structures are executed a number of times in linear relationship to the size of the input. It is important to note that in the best case scenario this algorithm would actually be linear because the nested while loops second conditional would trigger immediately allowing this while loop to execute in constant time. In the worst case however this while loop will be ended only by the first conditional and therefor it will take linear time to execute making the entire function run in n^2 time complexity. 

This algorithm takes linear space complexity because it defines variables within a for loop which is executed a number of times which is linear in its relationship to the input size. There are also two variables defined outside of the for loop but because they are only defined once they only take up constant time and do not impact the final space complexity. 